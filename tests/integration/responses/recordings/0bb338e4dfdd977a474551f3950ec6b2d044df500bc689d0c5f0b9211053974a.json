{
  "test_id": "tests/integration/responses/test_openai_response.py::TestOpenAIResponses::test_openai_response_streaming_invalid_base64_image_failure_code_is_spec_compliant[txt=openai/gpt-4o]",
  "request": {
    "method": "POST",
    "url": "https://api.openai.com/v1/v1/chat/completions",
    "headers": {},
    "body": {
      "model": "gpt-4o",
      "messages": [
        {
          "role": "user",
          "content": [
            {
              "type": "text",
              "text": "What is in this image?"
            },
            {
              "type": "image_url",
              "image_url": {
                "url": "data:image/png;base64,not_valid_base64_data!!!",
                "detail": "auto"
              }
            }
          ]
        }
      ],
      "stream": true,
      "stream_options": {
        "include_usage": true
      }
    },
    "endpoint": "/v1/chat/completions",
    "model": "gpt-4o"
  },
  "response": {
    "body": null,
    "is_streaming": false,
    "is_exception": true,
    "exception_data": {
      "category": "provider_sdk",
      "provider": "openai",
      "type": "BadRequestError",
      "message": "Error code: 400 - {'error': {'message': 'Invalid base64 image_url.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_base64'}}",
      "status_code": 400,
      "body": {
        "message": "Invalid base64 image_url.",
        "type": "invalid_request_error",
        "param": null,
        "code": "invalid_base64"
      }
    },
    "exception_message": "Error code: 400 - {'error': {'message': 'Invalid base64 image_url.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_base64'}}"
  },
  "id_normalization_mapping": {}
}
